{
  "version": "2",
  "templates": [
    {
      "type": 3,
      "title": "nAxiom - Global Infrastructure (MSSQL + Traefik + Dozzle)",
      "description": "Wsp√≥lna infrastruktura dla wszystkich stack√≥w nAxiom - MSSQL Server, Traefik (reverse proxy z HTTPS), Dozzle (logi).",
      "note": "<p>Ten szablon wdra≈ºa <strong>globalnƒÖ infrastrukturƒô</strong> wymaganƒÖ do uruchomienia aplikacji nAxiom:</p><h4>Zawiera:</h4><ul><li><strong>MSSQL Server</strong> - Baza danych SQL Server (2019/2022) z automatycznym tworzeniem wolumen√≥w</li><li><strong>Traefik</strong> - Nowoczesny reverse proxy z automatycznym HTTPS dla domen *.localtest.me</li><li><strong>Dozzle</strong> - PrzeglƒÖdarka log√≥w Docker w czasie rzeczywistym</li><li><strong>Homepage</strong> - Dashboard aplikacji z automatycznym wykrywaniem serwis√≥w</li></ul><h4>Kluczowe funkcje:</h4><ul><li>‚úÖ <strong>Certyfikat wildcard</strong> dla *.localtest.me (wbudowany)</li><li>‚úÖ <strong>Automatyczne przekierowanie HTTP ‚Üí HTTPS</strong></li><li>‚úÖ <strong>Dashboard Traefik</strong>: https://traefik.localtest.me</li><li>‚úÖ <strong>Dozzle</strong>: https://dozzle.localtest.me</li><li>‚úÖ <strong>Homepage</strong>: https://home.localtest.me</li><li>‚úÖ <strong>Wolumeny Docker</strong> dla trwa≈Çego przechowywania danych MSSQL</li><li>‚úÖ <strong>Backup MSSQL</strong> montowany z hosta (domy≈õlnie: /mnt/c/Docker/mssql)</li></ul><h4>Sieci Docker:</h4><ul><li><code>naxiom-common-db</code> - dla po≈ÇƒÖcze≈Ñ z bazƒÖ danych</li><li><code>naxiom-common-npm</code> - dla Traefik i aplikacji webowych</li></ul><h4>Dostƒôp:</h4><ul><li>üåê <strong>Traefik Dashboard</strong>: <a href='https://traefik.localtest.me'>https://traefik.localtest.me</a></li><li>üåê <strong>Dozzle</strong>: <a href='https://dozzle.localtest.me'>https://dozzle.localtest.me</a></li><li>üåê <strong>Homepage</strong>: <a href='https://home.localtest.me'>https://home.localtest.me</a></li><li>üóÑÔ∏è <strong>MSSQL</strong>: localhost:1433</li></ul><p><strong>‚ö†Ô∏è WA≈ªNE:</strong></p><ul><li>Ten stack <strong>musi dzia≈Çaƒá</strong> przed uruchomieniem jakiegokolwiek stacka nAxiom</li><li>Domeny *.localtest.me automatycznie wskazujƒÖ na 127.0.0.1 (nie wymaga modyfikacji /etc/hosts)</li><li>Certyfikat SSL jest self-signed - przeglƒÖdarka mo≈ºe wy≈õwietliƒá ostrze≈ºenie</li><li>Port MSSQL mo≈ºna zmieniƒá przez zmiennƒÖ NAX_MSSQL_EXPOSED_PORT (domy≈õlnie: 1433)</li><li>Dane MSSQL sƒÖ przechowywane w wolumenie Docker: naxiom-common-mssql-data</li><li>Homepage automatycznie wykrywa uruchomione kontenery z labelami homepage.*</li></ul>",
      "categories": ["infrastructure", "database", "proxy", "monitoring"],
      "platform": "linux",
      "logo": "https://naxiom.com/m/HNWxDXwgVFwgQb0cLLzRWExEEHToVXRV7X0YFGQ1nRj0RJ1QWW1x5SR53X1tgcwpdQENWKWgLRz0AVBYZBD9GfGw9Eg5DBmUPSmQFAWtnWEw/naxiom_favico2_pl.webp",
      "repository": {
        "url": "https://github.com/MateuszM-opteam/portainer-templates",
        "stackfile": "naxiom-common/docker-compose.yaml"
      },
      "env": [
        {
          "name": "NAX_MSSQL_VERSION",
          "label": "MSSQL Server Version",
          "description": "Wersja SQL Server (2019-latest, 2022-latest, azure-sql-edge)",
          "default": "2022-latest"
        },
        {
          "name": "NAX_MSSQL_PASSWORD",
          "label": "MSSQL SA Password",
          "description": "Has≈Ço dla u≈ºytkownika SA w SQL Server (min. 8 znak√≥w, wielkie/ma≈Çe/cyfry/znaki specjalne)",
          "default": ""
        },
        {
          "name": "NAX_MSSQL_EXPOSED_PORT",
          "label": "MSSQL Exposed Port",
          "description": "Port na kt√≥rym MSSQL bƒôdzie dostƒôpny na ho≈õcie (domy≈õlnie 1433)",
          "default": "1433"
        },
        {
          "name": "NAX_MSSQL_DATA_DIR",
          "label": "MSSQL Backup Directory",
          "description": "Katalog na ho≈õcie dla backup√≥w MSSQL (np. /mnt/c/Docker/mssql na WSL)",
          "default": "/mnt/c/Docker/mssql"
        },
        {
          "name": "NAX_TRAEFIK_VERSION",
          "label": "Traefik Version",
          "description": "Wersja Traefik reverse proxy",
          "default": "v3.6.7"
        },
        {
          "name": "NAX_TRAEFIK_DOMAIN",
          "label": "Traefik Domain",
          "description": "Domena dla dashboardu Traefik",
          "default": "proxy.localtest.me"
        },
        {
          "name": "NAX_DOZZLE_VERSION",
          "label": "Dozzle Version",
          "description": "Wersja Dozzle (log viewer)",
          "default": "pr-4404"
        },
        {
          "name": "NAX_DOZZLE_DOMAIN",
          "label": "Dozzle Domain",
          "description": "Domena dla Dozzle",
          "default": "logs.localtest.me"
        },
        {
          "name": "NAX_HOMEPAGE_VERSION",
          "label": "Homepage Version",
          "description": "Wersja Homepage (dashboard)",
          "default": "v1.10.0"
        },
        {
          "name": "NAX_HOMEPAGE_DOMAIN",
          "label": "Homepage Domain",
          "description": "Domena dla Homepage",
          "default": "home.localtest.me"
        }
      ]
    },
    {
      "type": 3,
      "title": "nAxiom - Common Infrastructure (Extended)",
      "description": "Rozszerzona wersja infrastruktury globalnej z dodatkowymi serwisami: RabbitMQ i Nginx Proxy Manager (zakomentowane, do odkomentowania wg potrzeb).",
      "note": "<p>Ten szablon to <strong>rozszerzona wersja</strong> globalnej infrastruktury nAxiom z opcjonalnymi serwisami:</p><h4>Zawiera (aktywne):</h4><ul><li><strong>MSSQL Server</strong> - Baza danych SQL Server</li><li><strong>Traefik</strong> - Reverse proxy z HTTPS</li><li><strong>Dozzle</strong> - Log viewer</li></ul><h4>Dostƒôpne (zakomentowane w docker-compose.yaml):</h4><ul><li><strong>RabbitMQ</strong> - Message broker z panelem zarzƒÖdzania</li><li><strong>Nginx Proxy Manager</strong> - Alternatywny reverse proxy z GUI</li></ul><h4>Aby w≈ÇƒÖczyƒá opcjonalne serwisy:</h4><ol><li>Przejd≈∫ do zak≈Çadki <strong>Editor</strong> w Portainer po wdro≈ºeniu stacka</li><li>Znajd≈∫ sekcjƒô z zakomentowanymi serwisami (rabbitmq lub nginx-proxy-manager)</li><li>Usu≈Ñ znaki komentarza (<code>#</code>) przed definicjƒÖ serwisu</li><li>Kliknij <strong>Update the stack</strong></li></ol><h4>RabbitMQ (po w≈ÇƒÖczeniu):</h4><ul><li>Panel zarzƒÖdzania: Port ustawiany przez NAX_RABBITMQ_EXPOSED_PORT</li><li>AMQP: Port 5672</li><li>Login: NAX_RABBITMQ_USERNAME / NAX_RABBITMQ_PASSWORD</li></ul><h4>Nginx Proxy Manager (po w≈ÇƒÖczeniu):</h4><ul><li>Admin panel: Port ustawiany przez NAX_NGINXPM_ADMIN_PORT</li><li>HTTP: Port 80, HTTPS: Port 443</li><li>Login: NAX_NGINXPM_USER / NAX_NGINXPM_PASSWORD</li></ul><p><strong>‚ö†Ô∏è UWAGA:</strong></p><ul><li>Domy≈õlnie stack dzia≈Ça identycznie jak podstawowa wersja</li><li>W≈ÇƒÖczenie RabbitMQ/NPM wymaga rƒôcznej edycji docker-compose.yaml</li><li>Je≈õli w≈ÇƒÖczysz Nginx Proxy Manager, porty 80/443 bƒôdƒÖ obs≈Çugiwane przez NPM zamiast Traefik</li><li>Stack mo≈ºna dostosowaƒá do potrzeb projektu bez tworzenia nowego szablonu</li></ul>",
      "categories": ["infrastructure", "database", "proxy", "messaging", "monitoring"],
      "platform": "linux",
      "logo": "https://naxiom.com/m/HNWxDXwgVFwgQb0cLLzRWExEEHToVXRV7X0YFGQ1nRj0RJ1QWW1x5SR53X1tgcwpdQENWKWgLRz0AVBYZBD9GfGw9Eg5DBmUPSmQFAWtnWEw/naxiom_favico2_pl.webp",
      "repository": {
        "url": "https://github.com/MateuszM-opteam/portainer-templates",
        "stackfile": "naxiom-common/docker-compose.yaml"
      },
      "env": [
        {
          "name": "NAX_MSSQL_VERSION",
          "label": "MSSQL Server Version",
          "description": "Wersja SQL Server (2019-latest, 2022-latest, azure-sql-edge)",
          "default": "2022-latest"
        },
        {
          "name": "NAX_MSSQL_PASSWORD",
          "label": "MSSQL SA Password",
          "description": "Has≈Ço dla u≈ºytkownika SA w SQL Server",
          "default": ""
        },
        {
          "name": "NAX_MSSQL_EXPOSED_PORT",
          "label": "MSSQL Exposed Port",
          "description": "Port MSSQL na ho≈õcie",
          "default": "1433"
        },
        {
          "name": "NAX_MSSQL_DATA_DIR",
          "label": "MSSQL Backup Directory",
          "description": "Katalog na ho≈õcie dla backup√≥w MSSQL",
          "default": "/mnt/c/Docker/mssql"
        },
        {
          "name": "NAX_TRAEFIK_VERSION",
          "label": "Traefik Version",
          "description": "Wersja Traefik",
          "default": "v3.6.7"
        },
        {
          "name": "NAX_TRAEFIK_DOMAIN",
          "label": "Traefik Domain",
          "description": "Domena dla dashboardu Traefik",
          "default": "proxy.localtest.me"
        },
        {
          "name": "NAX_HOMEPAGE_VERSION",
          "label": "Homepage Version",
          "description": "Wersja Homepage (dashboard)",
          "default": "v1.10.0"
        },
        {
          "name": "NAX_HOMEPAGE_DOMAIN",
          "label": "Homepage Domain",
          "description": "Domena dla Homepage",
          "default": "home.localtest.me"
        },
        {
          "name": "NAX_DOZZLE_VERSION",
          "label": "Dozzle Version",
          "description": "Wersja Dozzle",
          "default": "pr-4404"
        },
        {
          "name": "NAX_DOZZLE_DOMAIN",
          "label": "Dozzle Domain",
          "description": "Domena dla Dozzle",
          "default": "logs.localtest.me"
        },
        {
          "name": "NAX_RABBITMQ_VERSION",
          "label": "RabbitMQ Version (opcjonalne)",
          "description": "Wersja RabbitMQ - serwis zakomentowany, wymaga odkomentowania w docker-compose.yaml",
          "default": "4.1.3"
        },
        {
          "name": "NAX_RABBITMQ_USERNAME",
          "label": "RabbitMQ Username (opcjonalne)",
          "description": "U≈ºytkownik RabbitMQ",
          "default": "rabbit"
        },
        {
          "name": "NAX_RABBITMQ_PASSWORD",
          "label": "RabbitMQ Password (opcjonalne)",
          "description": "Has≈Ço RabbitMQ",
          "default": ""
        },
        {
          "name": "NAX_RABBITMQ_EXPOSED_PORT",
          "label": "RabbitMQ Management Port (opcjonalne)",
          "description": "Port panelu zarzƒÖdzania RabbitMQ",
          "default": "15675"
        },
        {
          "name": "NAX_NGINXPM_VERSION",
          "label": "Nginx Proxy Manager Version (opcjonalne)",
          "description": "Wersja NPM - serwis zakomentowany, wymaga odkomentowania w docker-compose.yaml",
          "default": "latest"
        },
        {
          "name": "NAX_NGINXPM_ADMIN_PORT",
          "label": "NPM Admin Port (opcjonalne)",
          "description": "Port panelu administracyjnego NPM",
          "default": "81"
        },
        {
          "name": "NAX_NGINXPM_USER",
          "label": "NPM Admin Email (opcjonalne)",
          "description": "Email administratora NPM",
          "default": "admin@admin"
        },
        {
          "name": "NAX_NGINXPM_PASSWORD",
          "label": "NPM Admin Password (opcjonalne)",
          "description": "Has≈Ço administratora NPM",
          "default": ""
        }
      ]
    },
    {
      "type": 3,
      "title": "nAxiom - Auto-Init Stack (First Tenant Auto-Creation)",
      "description": "Stack nAxiom z automatycznym tworzeniem pierwszego tenanta przy u≈ºyciu mechanizmu FirstTenantInitializer. Tenant jest tworzony automatycznie przy pierwszym uruchomieniu.",
      "note": "<p>Ten szablon wdra≈ºa nAxiom z <strong>automatycznƒÖ inicjalizacjƒÖ pierwszego tenanta</strong> bez potrzeby rƒôcznej konfiguracji:</p><h4>Dostƒôpne profile:</h4><ul><li><strong>tenantAdmin</strong> - Tylko TenantAPI i TenantAdmin UI (do zarzƒÖdzania tenantami)</li><li><strong>minimal</strong> - Backend + Frontend bez public-api</li><li><strong>full</strong> - Wszystkie serwisy aplikacji</li></ul><h4>Mechanizm FirstTenantInitializer:</h4><ol><li>Przy starcie aplikacji sprawdza czy tenanci ju≈º istniejƒÖ</li><li>Je≈õli baza tenant√≥w jest pusta, czyta pliki konfiguracyjne z <code>/home/app/toMigrate</code></li><li>Tworzy pierwszego tenanta jako <strong>AKTYWNY</strong> (<code>IsActive = true</code>)</li><li><strong>Automatycznie szyfruje</strong> connection string przed zapisem do bazy</li><li>Usuwa pliki konfiguracyjne po utworzeniu tenanta</li></ol><h4>Konfiguracja tenant przez zmienne ENV:</h4><ul><li><code>NAX_FIRST_TENANT_CUSTOMER</code> - Kod i nazwa tenanta (np. 'nAxiom')</li><li><code>NAX_FIRST_TENANT_DATABASE</code> - Baza danych tenanta</li><li><code>NAX_FIRST_TENANT_CULTURE</code> - Jƒôzyk (domy≈õlnie pl-PL)</li><li><code>NAX_FIRST_TENANT_ADMIN_EMAIL</code> - Email administratora</li></ul><p><strong>WYMAGANIA:</strong></p><ul><li>‚úÖ Stack 'nAxiom - Global Infrastructure' musi byƒá uruchomiony</li><li>‚úÖ Baza danych <code>NAX_MSSQL_DATABASE</code> (TenantsAdmin) musi istnieƒá</li><li>‚úÖ Baza danych <code>NAX_FIRST_TENANT_DATABASE</code> (dla tenanta) musi istnieƒá</li><li>‚úÖ Obrazy Docker muszƒÖ byƒá za≈Çadowane lokalnie</li><li>‚úÖ Sieci Docker: <code>naxiom-common-db</code> i <code>naxiom-common-npm</code></li></ul><p><strong>Dostƒôp po uruchomieniu:</strong></p><ul><li>üåê TenantAdminSPA: <code>http://${DOMAIN_NAME}/tenantsadmin</code> (przez NPM: https)</li><li>üåê Auth/Login: <code>http://${DOMAIN_NAME}/</code> (przez NPM: https)</li><li>üåê FrontSPA: <code>http://${DOMAIN_NAME}/front</code> (przez NPM: https)</li><li>üåê AdminSPA: <code>http://${DOMAIN_NAME}/admin</code> (przez NPM: https)</li></ul><p><strong>‚ö†Ô∏è UWAGI:</strong></p><ul><li>Mechanizm dzia≈Ça <strong>tylko raz</strong> - je≈õli jakikolwiek tenant ju≈º istnieje, nowy nie zostanie utworzony</li><li>Connection stringi w zmiennych ENV sƒÖ w <strong>plain text</strong>, ale sƒÖ automatycznie szyfrowane przed zapisem do bazy</li><li>Pliki w <code>toMigrate</code> sƒÖ automatycznie usuwane po utworzeniu tenanta</li><li>Nginx nas≈Çuchuje tylko na porcie 80 - NPM przekierowuje ruch HTTPS na ten port</li></ul>",
      "categories": ["application", "enterprise", "dotnet", "automation"],
      "platform": "linux",
      "logo": "https://naxiom.com/m/HNWxDXwgVFwgQb0cLLzRWExEEHToVXRV7X0YFGQ1nRj0RJ1QWW1x5SR53X1tgcwpdQENWKWgLRz0AVBYZBD9GfGw9Eg5DBmUPSmQFAWtnWEw/naxiom_favico2_pl.webp",
      "repository": {
        "url": "https://github.com/MateuszM-opteam/portainer-templates",
        "stackfile": "naxiom-init/docker-compose.yaml"
      },
      "env": [
        {
          "name": "COMPOSE_PROFILES",
          "label": "Compose Profiles",
          "description": "Wybierz profil do uruchomienia: tenantAdmin (tylko TenantAPI+UI), minimal (bez public-api), full (wszystkie serwisy)",
          "default": "full",
          "select": [
            {
              "text": "Full Stack - wszystkie serwisy",
              "value": "full",
              "default": true
            },
            {
              "text": "Minimal - bez public-api",
              "value": "minimal"
            },
            {
              "text": "TenantAdmin - tylko zarzƒÖdzanie tenantami",
              "value": "tenantAdmin"
            }
          ]
        },
        {
          "name": "NAX_VERSION_REPO",
          "label": "Docker Registry",
          "description": "Wybierz ≈∫r√≥d≈Ço obraz√≥w Docker",
          "default": "",
          "select": [
            {
              "text": "Portainer (lokalnie za≈Çadowane obrazy)",
              "value": "",
              "default": true
            },
            {
              "text": "Nexus Dev (nexus.naxiom.local:5000)",
              "value": "nexus.naxiom.local:5000/"
            },
            {
              "text": "Opteam Prod (repo.opteam.pl:5000)",
              "value": "repo.opteam.pl:5000/"
            }
          ]
        },
        {
          "name": "NAX_VERSION",
          "label": "nAxiom Version",
          "description": "Wersja aplikacji nAxiom (tag obraz√≥w Docker)",
          "default": "1.15.5.0"
        },
        {
          "name": "DOMAIN_NAME",
          "label": "Domain Name",
          "description": "Nazwa domeny dla aplikacji (np. nax-init.localtest.me lub naxdev.local)",
          "default": "nax-init.localtest.me"
        },
        {
          "name": "DEPLOY_TYPE",
          "label": "Deployment Type",
          "description": "Typ wdro≈ºenia (PROXY z Nginx lub DIRECT)",
          "default": "PROXY",
          "preset": true
        },
        {
          "name": "NAX_MSSQL_HOST",
          "label": "MSSQL Server Host",
          "description": "Adres serwera MSSQL (nazwa kontenera z Global Infrastructure lub host.docker.internal)",
          "default": "naxiom-common-mssql"
        },
        {
          "name": "NAX_MSSQL_DATABASE",
          "label": "MSSQL TenantsAdmin Database",
          "description": "Nazwa bazy danych dla zarzƒÖdzania tenantami (TenantAPI)",
          "default": "nax-init-tenantsAdmin"
        },
        {
          "name": "NAX_MSSQL_USERNAME",
          "label": "MSSQL Username",
          "description": "U≈ºytkownik SQL Server",
          "default": "sa"
        },
        {
          "name": "NAX_MSSQL_PASSWORD",
          "label": "MSSQL Password",
          "description": "Has≈Ço SQL Server (musi byƒá zgodne z Global Infrastructure)",
          "default": ""
        },
        {
          "name": "NAX_MSSQL_TIMEOUT",
          "label": "MSSQL Connection Timeout",
          "description": "Timeout po≈ÇƒÖczenia SQL w sekundach",
          "default": "120"
        },
        {
          "name": "NAX_FIRST_TENANT_CUSTOMER",
          "label": "First Tenant Code/Name",
          "description": "Kod i nazwa pierwszego tenanta (np. 'nAxiom', 'demo'). URLPrefix bƒôdzie pusty.",
          "default": "nAxiom"
        },
        {
          "name": "NAX_FIRST_TENANT_DATABASE",
          "label": "First Tenant Database",
          "description": "Nazwa bazy danych dla pierwszego tenanta (musi ju≈º istnieƒá!)",
          "default": "nax-init"
        },
        {
          "name": "NAX_FIRST_TENANT_CULTURE",
          "label": "First Tenant Culture",
          "description": "Kultura/jƒôzyk pierwszego tenanta",
          "default": "pl-PL"
        },
        {
          "name": "NAX_FIRST_TENANT_ADMIN_EMAIL",
          "label": "First Tenant Admin Email",
          "description": "Email administratora pierwszego tenanta",
          "default": "admin@demo.com"
        },
        {
          "name": "NAX_SMTP_SERVER",
          "label": "SMTP Server",
          "description": "Serwer SMTP dla wysy≈Çki emaili",
          "default": "smtp.office365.com"
        },
        {
          "name": "NAX_SMTP_PORT",
          "label": "SMTP Port",
          "description": "Port serwera SMTP",
          "default": "587"
        },
        {
          "name": "NAX_SMTP_USERNAME",
          "label": "SMTP Username",
          "description": "U≈ºytkownik SMTP (opcjonalnie)",
          "default": ""
        },
        {
          "name": "NAX_SMTP_PASSWORD",
          "label": "SMTP Password",
          "description": "Has≈Ço SMTP (opcjonalnie)",
          "default": ""
        },
        {
          "name": "NAX_SMTP_ENABLE_SSL",
          "label": "SMTP Enable SSL",
          "description": "W≈ÇƒÖcz SSL dla SMTP",
          "default": "true",
          "preset": true
        },
        {
          "name": "NAX_NGINX_VERSION",
          "label": "Nginx Version",
          "description": "Wersja obrazu Nginx",
          "default": "latest"
        },
        {
          "name": "NAX_RABBITMQ_VERSION",
          "label": "RabbitMQ Version",
          "description": "Wersja RabbitMQ (bez przyrostka -management, musi byƒá zgodna z Global Infrastructure)",
          "default": "4.1.3"
        },
        {
          "name": "NAX_RABBITMQ_USERNAME",
          "label": "RabbitMQ Username",
          "description": "Nazwa u≈ºytkownika RabbitMQ (musi byƒá zgodna z Global Infrastructure)",
          "default": "admin"
        },
        {
          "name": "NAX_RABBITMQ_PASSWORD",
          "label": "RabbitMQ Password",
          "description": "Has≈Ço RabbitMQ (musi byƒá zgodne z Global Infrastructure)",
          "default": ""
        }
      ]
    }
  ]
}
